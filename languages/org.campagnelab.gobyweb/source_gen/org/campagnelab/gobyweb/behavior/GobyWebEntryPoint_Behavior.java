package org.campagnelab.gobyweb.behavior;

/*Generated by MPS */

import org.jetbrains.mps.openapi.model.SNode;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SPropertyOperations;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SLinkOperations;
import java.util.List;
import java.util.ArrayList;
import jetbrains.mps.internal.collections.runtime.ListSequence;
import jetbrains.mps.internal.collections.runtime.ITranslator2;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SNodeOperations;
import org.jetbrains.mps.openapi.persistence.PersistenceFacade;
import jetbrains.mps.smodel.SModelUtil_new;

public class GobyWebEntryPoint_Behavior {
  public static void init(SNode thisNode) {
    SPropertyOperations.set(thisNode, "name", "plugin entry point");
    SPropertyOperations.set(SLinkOperations.getTarget(thisNode, "script", false), "name", "ScriptImplementation");
  }

  public static List<SNode> call_getInitStatements_6225477831020534309(SNode thisNode) {
    List<SNode> result = new ArrayList<SNode>();
    ListSequence.fromList(result).addElement(createStatementList_ayyqq7_a0a1a0());
    return result;
  }

  public static void call_addInitStatementsToImplementation_6225477831023821668(SNode thisNode, SNode implementation) {
    // Add statements at the top of an implementation block: 
    int i = 0;
    for (SNode statement : ListSequence.fromList(GobyWebEntryPoint_Behavior.call_getInitStatements_6225477831020534309(thisNode)).translate(new ITranslator2<SNode, SNode>() {
      public Iterable<SNode> translate(SNode it) {
        return SLinkOperations.getTargets(it, "statement", true);
      }
    })) {
      ListSequence.fromList(SLinkOperations.getTargets(SLinkOperations.getTarget(implementation, "body", true), "statement", true)).insertElement(i++, statement);
    }
  }

  public static SNode call_getGobyWebSource_4384389959135526390(SNode thisNode) {
    return ListSequence.fromList(SNodeOperations.getDescendants(thisNode, "org.campagnelab.gobyweb.environment.structure.GobyWebSource", false, new String[]{})).first();
  }

  private static SNode createStatementList_ayyqq7_a0a1a0() {
    PersistenceFacade facade = PersistenceFacade.getInstance();
    SNode n1 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.baseLanguage.structure.StatementList", null, false);
    {
      SNode n2 = SModelUtil_new.instantiateConceptDeclaration("org.campagnelab.NYoSh.structure.Step", null, false);
      {
        n2.setProperty("description", "Catch all step for GobyWeb");
        n2.setProperty("hidden", "" + true);
        SNode n3 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.baseLanguage.structure.StatementList", null, false);
        {
          SNode n4 = SModelUtil_new.instantiateConceptDeclaration("org.campagnelab.nyosh.environment.structure.EnvironmentSourceList", null, false);
          {
            SNode n5 = SModelUtil_new.instantiateConceptDeclaration("org.campagnelab.nyosh.environment.structure.JVMSource", null, false);
            {
              SNode n6 = SModelUtil_new.instantiateConceptDeclaration("org.campagnelab.nyosh.environment.structure.JVMLoader", null, false);
              n5.addChild("loader", n6);
            }
            SNode n7 = SModelUtil_new.instantiateConceptDeclaration("org.campagnelab.gobyweb.environment.structure.GobyWebSource", null, false);
            {
              SNode n8 = SModelUtil_new.instantiateConceptDeclaration("org.campagnelab.gobyweb.environment.structure.GobyWebLoader", null, false);
              n7.addChild("loader", n8);
            }
            n4.addChild("sources", n5);
            n4.addChild("sources", n7);
          }
          SNode n9 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.baseLanguage.structure.Statement", null, false);
          n3.addChild("statement", n4);
          n3.addChild("statement", n9);
        }
        n2.addChild("statements", n3);
      }
      n1.addChild("statement", n2);
    }
    return n1;
  }
}
